import{s as u,q as m,j as t,t as h,a9 as j,T as f,i as y,f as L,k as n,h as d,aa as v,I as T,ae as k,F as C,o as D,as as A}from"./strapi-CG4Jwlgt.js";import{W as c}from"./WidgetHelpers-DD51Movc.js";import{R as b}from"./RelativeTime-DWcef6uX.js";import{u as w,g as E}from"./getActionTypesDefaultMessages-B2zyGfk9.js";const M=D(b)`
  display: inline-block;

  &::first-letter {
    text-transform: uppercase;
  }
`,S=({items:s})=>{const{formatMessage:i}=u(),{trackUsage:a}=h(),l=j(),o=e=>`/settings/audit-logs?pageSize=${A}&page=1&sort=date:DESC&id=${e.id}`,p=e=>()=>{a("willOpenAuditLogDetailsFromHome");const r=o(e);l(r)};return t.jsx(f,{colCount:4,rowCount:s?.length??0,children:t.jsx(y,{children:s?.map(e=>{const r=i({id:`Settings.permissions.auditLogs.${e.action}`,defaultMessage:E(e.action)},{model:e.payload.model??""}),g=e.user?.displayName??"-";return t.jsxs(L,{onClick:p(e),cursor:"pointer",children:[t.jsx(n,{children:t.jsx(d,{title:r,variant:"omega",textColor:"neutral800",children:r})}),t.jsx(n,{children:t.jsx(d,{variant:"omega",textColor:"neutral800",children:t.jsx(M,{timestamp:new Date(e.date)})})}),t.jsx(n,{children:t.jsx(d,{title:g,variant:"omega",textColor:"neutral800",children:g})}),t.jsx(n,{onClick:x=>x.stopPropagation(),children:t.jsx(v,{display:"inline-block",children:t.jsx(T,{tag:k,to:o(e),onClick:()=>a("willOpenAuditLogDetailsFromHome"),label:i({id:"global.details",defaultMessage:"Details"}),variant:"ghost",children:t.jsx(C,{})})})})]},`lastActivity_auditLog_${e.id}`)})})})},I=()=>{const{formatMessage:s}=u(),[{query:i}]=m(),{data:a,isLoading:l,error:o}=w({...i,page:1,pageSize:4,sort:"date:DESC"},{refetchOnMountOrArgChange:!0});return l?t.jsx(c.Loading,{}):o||!a?.results?t.jsx(c.Error,{}):a.results.length===0?t.jsx(c.NoData,{children:s({id:"widget.last-activity.no-activity",defaultMessage:"No activity"})}):t.jsx(S,{items:a.results??[]})};export{I as AuditLogsWidget};
